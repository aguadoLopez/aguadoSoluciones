---
const logo = "/img/logo.png";
---
<div class="fixed top-0 left-0 right-0 z-50 flex items-center justify-between px-[4%] 
            md:pt-12 lg:pt-4 before:content-[''] before:absolute before:inset-0 
            lg:before:h-[85%] md:before:h-[95%] before:h-[90%] before:bg-white before:z-[-1]">
    <nav id="menu" class="flex md:w-10/12 lg:w-[90%] lg:h-16 md:h-20 shadow-md shadow-slate-400 shadow-current rounded-sm items-center justify-between p-4 bg-blanco shadow-md">
        <!-- Izquierda: Botón de inicio o logo -->
        <button id="inicioLogo" class="px-2 py-0.5 rounded-sm font-archivoBlack bg-verde text-xl font-black text-blanco">
            <a href="/">INICIO</a>
        </button>

        <!-- Botón hamburguesa en móvil -->
        <button id="hamburguesa" class="hidden text-verde text-3xl focus:outline-none">
        ☰
        </button>

        <!-- Derecha: Menú principal -->
        <ul id="paginas" class="flex mr-10 space-x-10 text-verde font-archivoBlack font-black text-lg">
            <li><a href="/servicios">Servicios</a></li>
            <li><a href="/productos">Productos</a></li>
            <li><a href="/contacto">Contacto</a></li>
        </ul>
    </nav>
    <!-- Menú desplegable móvil -->
     <div id="menuMovil" class="hidden absolute top-24 mx-auto left-0 right-0 bg-blanco shadow-md shadow-slate-400 shadow-current rounded-sm p-4 z-50 space-y-4 w-5/6 text-verde font-black">
        <a href="/servicios" class="block">Servicios</a>
        <a href="/productos" class="block">Productos</a>
        <a href="/contacto" class="block">Contacto</a>
    </div>
    <img id="logo" src={logo} alt="Logo" class="hidden md:block md:w-24 lg:w-28">
</div>



<script is:inline>
    function aplicarVistaMovil() {
        const isMobile = window.innerWidth <= 639;
        const menu = document.getElementById('menu');
        const left = document.getElementById('inicioLogo');
        const hamburguesa = document.getElementById('hamburguesa');
        const menuMovil = document.getElementById('menuMovil');
        const paginas = document.getElementById('paginas');
        const logo = document.getElementById('logo');

       if (!menu || !left || !hamburguesa || !menuMovil || !paginas || !logo) return;

        if (isMobile) {
            let abierto = false;

            // menu.classList.remove('h-28');
            menu.classList.add('mx-auto', 'mt-6', 'h-20', 'w-[90%]');
            //necesitamos wide a 91% para coincidir con 5/6 del menu por el padding de su div padre (necesario para tapar en el scroll)

            // Sustituye "Inicio" por el logo
            left.innerHTML = `<a href="/"><img src="/img/logo.png" alt="Logo" class="h-8"></a>`;
            left.classList.remove('bg-verde');

            // Mostrar hamburguesa y ocultar el menú normal
            hamburguesa.classList.remove('hidden');
            paginas.classList.add('hidden');
            // logo.classList.add('hidden');

            // Alternar visibilidad del menú móvil
            hamburguesa.addEventListener('click', () => {
                abierto = !abierto;
                hamburguesa.textContent = abierto ? '☰' : '☰';
                menuMovil.classList.toggle('hidden');
            });
        }
    }
    

    // Ejecutar inmediatamente
    window.addEventListener('load', aplicarVistaMovil);

    // Y si cambia el tamaño de la pantalla después
    window.addEventListener('resize', aplicarVistaMovil);

        console.log("window",window.innerWidth);

</script>