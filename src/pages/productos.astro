---
import Layout from "../layouts/Layout.astro";
---

<Layout>
    <!-- Lista de Marcas de Productos-->
    <div class="bg-blanco p-4 pb-[9%]">
        <h2 id="page-title" class="text-[25px] lg:text-[30px] text-center text-black font-archivoBlack font-semibold mt-4 mb-4">PRODUCTOS</h2>
        <h2 id="page-title" class="text-[15px] lg:text-[20px] text-black font-archivoBlack t-4 ml-[15%] mb-4">MARCAS:</h2>
          <div id="lista-productos" class="grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-5 px-[15%] gap-x-2 gap-y-6">
            <!-- Aquí se cargarán los productos -->
          </div>
    </div>
    
    <script type="module">
        document.addEventListener('DOMContentLoaded', async () => {
          await loadProductos();
        });
      
        // Función para cargar los productos
        async function loadProductos() {
          try {
            const response = await fetch('/api/marcasproductos');
            const data = await response.json();
            console.log(data);
            const productos = data.marcasProductos;
      
            const container = document.getElementById('lista-productos');
            container.innerHTML = '';
      
            productos.forEach(producto => {
              const productoCard = document.createElement('div');
              productoCard.classList.add('bg-blanco', 'p-4', 'shadow', 'rounded', 'aspect-[4/3]', 'flex', 'items-center', 'justify-center');
              productoCard.innerHTML = `
                <img src="${producto.imagen}" alt="${producto.nombre}" class="w-[90%] h-[90%] object-contain object-center overflow-hidden">            
                `;
              container.appendChild(productoCard);
            });
      
          } catch (error) {
            console.error('Error al cargar los productos:', error);
          }
        }
    </script>
</Layout>